// schema.prisma - Sadeleştirilmiş CMS için
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// İletişim formları için
model ContactForm {
  id        String   @id @default(cuid())
  name      String
  email     String
  phone     String?
  company   String?
  service   String   // Hangi hizmet grubu (akademi, deneyim, otomasyon, strateji)
  subService String? // Spesifik hizmet (etkinlik yönetimi vs.)
  message   String
  status    String   @default("NEW") // NEW, REVIEWED, RESPONDED, CLOSED
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([status])
  @@index([service])
  @@index([createdAt])
}

// Sayfa içerikleri için (çok dilli destek ile)
model Content {
  id        String   @id @default(cuid())
  key       String   // unique identifier (akademi_header, deneyim_about vs.)
  title     String
  content   String   @db.Text
  locale    String   @default("tr") // tr, en vs.
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([key, locale])
  @@index([locale])
  @@index([isActive])
}

// Medya dosyaları için
model Media {
  id        String   @id @default(cuid())
  filename  String
  originalName String
  mimeType  String
  size      Int
  url       String
  alt       String?
  category  String?  // logo, service-image, background vs.
  createdAt DateTime @default(now())

  @@index([category])
  @@index([mimeType])
}

// Basit sistem logları için
model SystemLog {
  id        String   @id @default(cuid())
  level     String   // INFO, WARN, ERROR
  message   String
  data      Json?
  ip        String?
  userAgent String?
  createdAt DateTime @default(now())

  @@index([level])
  @@index([createdAt])
}